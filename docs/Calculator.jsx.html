<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>JSDoc: Source: Calculator.jsx</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link
      type="text/css"
      rel="stylesheet"
      href="styles/prettify-tomorrow.css"
    />
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css" />
  </head>

  <body>
    <div id="main">
      <h1 class="page-title">Source: Calculator.jsx</h1>

      <section>
        <article>
          <pre
            class="prettyprint source linenums"
          ><code>import React, { useState } from 'react';
import styled from 'styled-components';
import CalculatorDisplay from './CalculatorDisplay';
import CalculatorButtonPanel from './CalculatorButtonPanel';

/**
 * Calculator
 * @param {object} props - Props
 * @returns {component} - StyledCalculator
 */
const Calculator = () => {
  const [total, setTotal] = useState(null);
  const [next, setNext] = useState(null);
  const [operation, setOperation] = useState(null);

  /**
   * Is number
   * @param {string|number} valueToCheck
   */
  const isNumber = valueToCheck => {
    return Number.isInteger(valueToCheck);
  };

  /**
   * Operate
   * @returns {void}
   */
  const operate = () => {
    const totalNbr = Number(total);
    const nextNbr = Number(next);

    // Plus
    if (operation === '+') {
      const result = totalNbr + nextNbr;
      const resultStr = String(result);

      setTotal(resultStr);
      setNext(null);
      setOperation(null);
    }

    // Minus
    if (operation === '-') {
      const result = totalNbr - nextNbr;
      const resultStr = String(result);

      setTotal(resultStr);
      setNext(null);
      setOperation(null);
    }

    // Multiply
    if (operation === 'x') {
      const result = totalNbr * nextNbr;
      const resultStr = String(result);

      setTotal(resultStr);
      setNext(null);
      setOperation(null);
    }

    // Divide
    if (operation === 'รท') {
      const result = totalNbr / nextNbr;
      const resultStr = String(result);

      setTotal(resultStr);
      setNext(null);
      setOperation(null);
    }

    // Percentage
    if (operation === '%') {
      const result = totalNbr / 100;
      const resultStr = String(result);

      setTotal(resultStr);
      setNext(null);
      setOperation(null);
    }
  };

  /**
   * Calculate
   * @param {string} buttonName
   * @returns {void}
   */
  const calculate = buttonName => {
    // Reset
    if (buttonName === 'CE') {
      setTotal(null);
      setNext(null);
      setOperation(null);
    }

    // Numbers
    if (isNumber(Number(buttonName))) {
      // No operation, append number
      if (!operation) {
        // Total is zero, replace
        if (total === '0') {
          setTotal(buttonName);
          return;
        }

        const number = Number(buttonName);
        const result = String(total + number);
        setTotal(result);

        return;
      }

      // Operation selected already
      const number = Number(buttonName);
      const result = String(next + number);
      setNext(result);
    }

    // Plus
    if (buttonName === '+') {
      setOperation(buttonName);
    }

    // Minus
    if (buttonName === '-') {
      setOperation(buttonName);
    }

    // Multiply
    if (buttonName === 'x') {
      setOperation(buttonName);
    }

    // Divide
    if (buttonName === 'รท') {
      setOperation(buttonName);
    }

    // Percentage
    if (buttonName === '%') {
      setOperation(buttonName);
      operate();
    }

    // Dot
    if (buttonName === '.') {
      // Do nothing if total already contains a dot or no total yet
      if (!total || total.includes('.')) return;

      const result = `${total}.`;
      setTotal(result);
    }

    // Get total
    if (buttonName === '=') {
      // Only operate if there's a next value to operate on, except in case of percentage operation
      if (next || operation === '%') {
        operate();
      }
    }
  };

  /**
   * Handle click
   * @param {*} buttonName
   * @returns {void}
   */
  const handleClick = buttonName => {
    calculate(buttonName);
  };

  return (
    &lt;StyledCalculator>
      &lt;CalculatorDisplay value={next || total || '0'} />
      &lt;CalculatorButtonPanel clickHandler={handleClick} />
    &lt;/StyledCalculator>
  );
};

export default Calculator;

const StyledCalculator = styled.div`
  display: flex;
  flex-direction: column;
  background: #333333;
  padding: 1.3rem;
  box-shadow: 0.2rem 0.4rem 3rem;
  width: 100vw;
  max-width: 500px;
  border-radius: 0.3rem;
`;
</code></pre>
        </article>
      </section>
    </div>

    <nav>
      <h2><a href="index.html">Home</a></h2>
      <h3>Global</h3>
      <ul>
        <li><a href="global.html#Calculator">Calculator</a></li>
        <li><a href="global.html#CalculatorButton">CalculatorButton</a></li>
        <li>
          <a href="global.html#CalculatorButtonPanel">CalculatorButtonPanel</a>
        </li>
        <li><a href="global.html#CalculatorDisplay">CalculatorDisplay</a></li>
      </ul>
    </nav>

    <br class="clear" />

    <footer>
      Documentation generated by
      <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Fri Nov 22
      2019 17:40:11 GMT+0200 (Eastern European Standard Time)
    </footer>

    <script>
      prettyPrint();
    </script>
    <script src="scripts/linenumber.js"></script>
  </body>
</html>
